# ТЕХНИЧЕСКОЕ ЗАДАНИЕ
## Система электронного документооборота юридических дел (Legal Case Management System)

**Версия:** 1.0  
**Дата:** 08.12.2025  
**Статус:** Утверждено к разработке

---

## 1. ОБЩИЕ СВЕДЕНИЯ

### 1.1 Полное наименование системы
**Система электронного документооборота юридических дел** (далее — **СЭДЮД** или **Система** или **Legal CMS**)

### 1.2 Краткое описание
Система предназначена для автоматизации процессов управления юридическими делами, документооборота и хранения юридической информации в рамках юридической практики. Система заменяет файловую систему хранения дел на централизованную базу данных с веб-интерфейсом, полнотекстовым поиском и интеграцией с локальными AI моделями для OCR и генерации документов.

### 1.3 Основание для разработки
- Потребность в централизованном хранении и управлении юридическими делами
- Необходимость быстрого поиска документов и информации по делам
- Автоматизация рутинных операций с использованием локальных AI моделей
- Контроль сроков и событий по делам
- Генерация отчётов и карточек дел для клиентов

### 1.4 Заказчик и разработчик
- **Заказчик**: Юридическая практика (Республика Молдова)
- **Тип организации**: Частная юридическая практика
- **Количество пользователей**: 2 (юрист + ассистент)
- **Разработчик**: [Указать исполнителя]
- **Срок разработки**: 3-4 месяца

### 1.5 Плановые сроки
- **Начало разработки**: [Дата начала]
- **MVP (базовая версия)**: [Дата + 2.5-3 месяца]
- **Полная версия**: [Дата + 3.5-4 месяца]
- **Ввод в эксплуатацию**: [Дата + 4 месяца]

### 1.6 Источники финансирования
- Собственные средства заказчика
- Ориентировочный бюджет: 170,000 - 350,000 MDL (в зависимости от версии)

### 1.7 Юрисдикция и применимое законодательство
- **Страна**: Республика Молдова
- **Применимое законодательство**: 
  - Гражданский процессуальный кодекс РМ
  - Уголовно-процессуальный кодекс РМ
  - Закон №133/2011 о защите персональных данных
- **Языки интерфейса**: Русский (основной), Румынский (опционально)
- **Валюта**: Молдавский лей (MDL)

---

## 2. НАЗНАЧЕНИЕ И ЦЕЛИ СОЗДАНИЯ СИСТЕМЫ

### 2.1 Назначение системы
Система предназначена для комплексной автоматизации работы юридической практики, включающей:
- Управление портфелем дел
- Централизованное хранение документов
- Контроль процессуальных сроков и событий
- Управление взаимоотношениями с клиентами
- Ведение базы законодательных актов Республики Молдова
- Генерацию отчётности и документов

### 2.2 Цели создания системы

#### 2.2.1 Стратегические цели
1. **Повышение эффективности работы** юридической практики через автоматизацию
2. **Снижение рисков** пропуска процессуальных сроков
3. **Улучшение качества обслуживания** клиентов через быстрый доступ к информации
4. **Обеспечение конфиденциальности** через локальное размещение данных

#### 2.2.2 Функциональные цели
1. **Централизованное хранение** всех дел и документов с возможностью быстрого поиска
2. **Автоматизация документооборота** с использованием AI для:
   - OCR обработки сканированных документов
   - Генерации документов по шаблонам
   - Семантического поиска похожих дел
3. **Контроль сроков** по делам и судебным заседаниям с автоматическими напоминаниями
4. **Структурированное хранение** законодательной базы Республики Молдова
5. **Генерация отчётов** и карточек дел для клиентов
6. **Обеспечение конфиденциальности** через локальное размещение без передачи данных в облако

#### 2.2.3 Технические цели
1. Создание масштабируемой архитектуры, поддерживающей до 10,000 дел
2. Интеграция с локальными AI моделями (Ollama) для автономной работы
3. Обеспечение производительности: поиск < 1 сек, загрузка страниц < 2 сек
4. Реализация надёжной системы резервного копирования

### 2.3 Основные пользователи системы

#### 2.3.1 Юрист (Администратор)
**Роль:** Владелец юридической практики, главный пользователь
**Права доступа:** Полный доступ ко всем модулям и функциям
**Основные задачи:**
- Управление делами и клиентами
- Контроль сроков
- Генерация отчётов
- Администрирование системы
- Управление пользователями

#### 2.3.2 Ассистент юриста
**Роль:** Помощник, выполняющий технические функции
**Права доступа:** Ограниченный доступ (без удаления дел, без доступа к настройкам)
**Основные задачи:**
- Загрузка и систематизация документов
- Создание событий в календаре
- Подготовка проектов документов
- Поиск информации

#### 2.3.3 Клиенты (косвенные пользователи)
**Роль:** Не имеют прямого доступа к системе
**Взаимодействие:** Получают распечатанные карточки дел и документы от юриста

---

## 3. ХАРАКТЕРИСТИКА ОБЪЕКТОВ АВТОМАТИЗАЦИИ

### 3.1 Текущее состояние (AS-IS)

#### 3.1.1 Хранение дел
**Текущий метод:** Файловая система
- Дела хранятся в папках на сервере
- Структура папок: `PREFIX_YYYY-MM-DD_Client_Name` или `YYYY-MM-DD_Client_Name`
- Примеры префиксов: `LS` (тип дела уточняется), и другие
- Путь: `/mnt/data_vl/DOC/MAA/DB/Projects/TelegramBot/CASE`

**Пример структуры:**
```
CASE/
├── 2025-12-04_Alla_Mogopovoi/
│   ├── CERERE.pdf
│   ├── A1_2025-11-27_AP_decizie.pdf
│   ├── A2_Copia_actionoi_de_proprietate.pdf
│   └── A3_Copia_buletinului_de_identitate.pdf
├── LS_2025-11-15_Client_Name/
│   └── ...
└── ...
```

#### 3.1.2 Наименование файлов
**Шаблон:** `PREFIX_{{DATE:YYYY-MM-DD_HHmmss}}` или описательное название
**Префиксы:** Зависят от типа дела (LS, CR, AD, и другие)

#### 3.1.3 Объём данных
- **Активных дел:** ~20
- **Новых дел в неделю:** 3-4
- **Общий объём дел в год:** ~150-200
- **Типы дел:** 
  - Гражданские
  - Уголовные
  - Административные
  - Международные
  - Арбитражные
- **Форматы документов:** 
  - Преимущественно PDF (решения судов, заявления, доверенности)
  - DOCX (редактируемые документы)
  - Изображения (сканы, фото документов)

#### 3.1.4 Законодательная база
**Текущий метод:** Отдельная папка с PDF файлами законов
- Законы, кодексы, постановления Республики Молдова
- Структура: папки по типам актов
- Обновление: ручное добавление новых актов
- Поиск: только по именам файлов (нет полнотекстового поиска)

### 3.2 Проблемы текущей системы

#### 3.2.1 Организационные проблемы
1. **Отсутствие централизованного поиска**
   - Невозможно быстро найти дело по имени клиента, номеру дела, дате
   - Поиск документа требует знания структуры папок
   
2. **Сложность навигации**
   - Большое количество папок затрудняет навигацию
   - Нет визуального представления статуса дел
   
3. **Отсутствие связей**
   - Нет связи между документами, делами и персонами
   - Невозможно быстро найти все дела одного клиента
   - Нет связи дел с законодательными актами

4. **Невозможность быстрой генерации отчётов**
   - Карточка дела создаётся вручную
   - Статистика по делам требует ручного подсчёта

#### 3.2.2 Технические проблемы
1. **Отсутствие контроля сроков**
   - Нет автоматических напоминаний о судебных заседаниях
   - Риск пропуска процессуальных сроков
   
2. **Ручная обработка документов**
   - Сканированные документы не распознаются автоматически
   - Невозможен поиск по содержимому PDF
   
3. **Отсутствие версионности**
   - Нет истории изменений документов
   - Риск потери данных при случайном удалении

4. **Нет резервного копирования**
   - Риск потери всех данных при сбое сервера

#### 3.2.3 Проблемы безопасности
1. **Отсутствие аудита**
   - Нет логирования действий пользователей
   - Невозможно отследить, кто и когда изменял файлы
   
2. **Нет разграничения прав доступа**
   - Все пользователи имеют одинаковый доступ к файлам

### 3.3 Требования к новой системе (TO-BE)

#### 3.3.1 Функциональные требования
1. **Централизованное хранилище** всех дел, документов, персон в базе данных
2. **Полнотекстовый поиск** по всем документам (включая содержимое PDF)
3. **Автоматический OCR** для сканированных документов
4. **Календарь событий** с автоматическими напоминаниями
5. **Генерация документов** по шаблонам с подстановкой данных
6. **Интеграция с AI** для:
   - Распознавания текста (OCR)
   - Генерации текста
   - Семантического поиска похожих дел
7. **Система тегов** для удобной категоризации
8. **Генерация отчётов** (карточка дела, статистика)
9. **История изменений** для всех критичных данных
10. **Автоматическое резервное копирование**

#### 3.3.2 Технические требования
1. **Локальное размещение** на сервере MX-Linux (SysVinit, Xfce)
2. **Веб-доступ** через браузер (без установки ПО на клиентские машины)
3. **Интеграция с Ollama** (локальный AI сервер, уже установлен)
4. **База данных PostgreSQL** для надёжного хранения
5. **Производительность:**
   - Загрузка страниц < 2 секунд
   - Поиск < 1 секунда
   - OCR документа < 10 секунд на страницу
6. **Масштабируемость:**
   - Поддержка до 10,000 дел
   - Поддержка до 100,000 документов
   - Общий объём хранилища до 500 ГБ
7. **Безопасность:**
   - JWT авторизация
   - RBAC (Role-Based Access Control)
   - Аудит всех действий
   - HTTPS доступ
8. **Надёжность:**
   - Ежедневное автоматическое резервное копирование
   - Возможность восстановления из бэкапа

#### 3.3.3 Требования по интерфейсу
1. **Адаптивный дизайн** (desktop first)
2. **Интуитивно понятный интерфейс** (минимальное обучение)
3. **Русский язык** (основной), румынский (опционально)
4. **Материал дизайн** (современный, профессиональный вид)
5. **Drag-and-drop** для загрузки файлов
6. **Предпросмотр документов** в браузере
7. **Календарное представление** событий

### 3.4 Ожидаемые результаты внедрения

#### 3.4.1 Количественные результаты
- **Сокращение времени поиска** документа: с 5-10 минут до 10-30 секунд (в 10-20 раз)
- **Увеличение скорости обработки** дела: на 30-40%
- **Снижение риска пропуска срока**: до 0% (автоматические напоминания)
- **Сокращение времени подготовки** карточки дела: с 30 минут до 2 минут (в 15 раз)

#### 3.4.2 Качественные результаты
- Повышение качества юридических услуг
- Улучшение контроля над делами
- Снижение стресса от риска пропуска сроков
- Профессиональный имидж при демонстрации системы клиентам
- Возможность масштабирования практики (приём большего количества дел)

---

## 4. СОСТАВ СИСТЕМЫ

### 4.1 Архитектурные компоненты

```
┌─────────────────────────────────────────────────────────┐
│                    ПОЛЬЗОВАТЕЛИ                          │
│              (Браузер: Chrome, Firefox, Edge)            │
└────────────────────┬────────────────────────────────────┘
                     │ HTTPS
                     ▼
┌─────────────────────────────────────────────────────────┐
│                  NGINX (Reverse Proxy)                   │
│                    SSL Termination                       │
└────────────┬───────────────────────┬────────────────────┘
             │                       │
             ▼                       ▼
┌────────────────────┐    ┌────────────────────────────────┐
│   FRONTEND         │    │      BACKEND (FastAPI)         │
│   (Vue.js 3 +      │    │                                │
│    Vuetify)        │    │  - REST API                    │
│                    │    │  - Business Logic              │
│  - UI Components   │    │  - Integration with Ollama     │
│  - State Mgmt      │    │  - File Processing             │
│  - Routing         │    │  - OCR Service                 │
└────────────────────┘    └────────┬───────────────────────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
                    ▼              ▼              ▼
         ┌────────────────┐ ┌───────────┐ ┌────────────┐
         │  PostgreSQL    │ │  Ollama   │ │ File       │
         │  Database      │ │  AI       │ │ Storage    │
         │                │ │  Server   │ │            │
         │  - Cases       │ │           │ │ - Documents│
         │  - Documents   │ │ - OCR     │ │ - Templates│
         │  - Persons     │ │ - Gen     │ │ - Legal    │
         │  - Events      │ │ - Search  │ │   Acts     │
         └────────────────┘ └───────────┘ └────────────┘
```

### 4.2 Программные модули

#### 4.2.1 Frontend модули
1. **UI Framework**: Vue.js 3 + Vuetify 3
2. **Модули:**
   - Dashboard (дашборд)
   - Cases Management (управление делами)
   - Persons Management (управление персонами)
   - Documents Management (управление документами)
   - Calendar (календарь событий)
   - Search (поиск)
   - Reports (отчёты)
   - Settings (настройки)
   - Auth (авторизация)

#### 4.2.2 Backend модули
1. **API Framework**: FastAPI
2. **Модули:**
   - Cases Service (дела)
   - Persons Service (персоны)
   - Documents Service (документы)
   - Events Service (события)
   - Legal Acts Service (законодательная база)
   - Templates Service (шаблоны документов)
   - OCR Service (распознавание текста)
   - Search Service (поиск)
   - Reports Service (отчёты)
   - Auth Service (авторизация)
   - Admin Service (администрирование)

#### 4.2.3 Интеграционные модули
1. **Ollama Integration**: Работа с AI моделями
2. **PostgreSQL ORM**: SQLAlchemy 2.0
3. **Email Service**: Отправка уведомлений (опционально)

### 4.3 Технологический стек

#### 4.3.1 Backend
```
Язык:              Python 3.11+
Framework:         FastAPI 0.104+
ORM:               SQLAlchemy 2.0+
Миграции:          Alembic
Валидация:         Pydantic v2
БД драйвер:        asyncpg (async PostgreSQL)
HTTP клиент:       httpx (для Ollama API)
Авторизация:       PyJWT
Хеширование:       bcrypt
Шаблонизатор:      Jinja2
Планировщик:       APScheduler
```

#### 4.3.2 Frontend
```
Вариант 1 (рекомендуется):
  Framework:       Vue.js 3.3+
  UI Library:      Vuetify 3
  Routing:         Vue Router 4
  State Mgmt:      Pinia
  HTTP Client:     Axios
  
Вариант 2 (упрощённый):
  Templates:       Jinja2 (Django-style)
  CSS Framework:   Bootstrap 5
  JS:              Vanilla JS / jQuery
```

#### 4.3.3 База данных
```
СУБД:              PostgreSQL 15+
Расширения:        - pg_trgm (поиск по подстроке)
                   - unaccent (поиск без учёта диакритики)
Full-Text Search:  Russian, Romanian
```

#### 4.3.4 AI Интеграция
```
Сервер:            Ollama (уже установлен)
Модели:
  - deepseek-ocr:latest (6.7 GB) - OCR
  - qwen2.5:7b (4.7 GB) - генерация текста
  - nomic-embed-text:latest (274 MB) - embeddings
```

#### 4.3.5 Инфраструктура
```
ОС:                MX-Linux (Debian-based)
Init:              SysVinit
Web Server:        Nginx (reverse proxy)
SSL:               Let's Encrypt / Certbot
```

---

**[КОНЕЦ РАЗДЕЛА 1]**

**Следующие разделы:**
- Раздел 2: Требования к функциональности (9 модулей)
- Раздел 3: Схема базы данных
- Раздел 4: API спецификация
- Раздел 5: Требования к интерфейсу
- Раздел 6: План работ и сроки
- Раздел 7: Критерии приёмки

**Продолжить генерацию следующего раздела?**
